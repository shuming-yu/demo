{"version":3,"file":"js/667.5672cc72.js","mappings":"8hDA0GA,MAAMA,EAAU,yCACVC,EAAe,kDACf,EAAEC,IAAMC,EAAAA,EAAAA,MAERC,IADQC,EAAAA,EAAAA,IAAO,UACHC,EAAAA,EAAAA,KAAI,IAGhBC,EAAaC,EAAQ,MAC3B,SAASC,EAAiBC,GACxBA,EAAMC,OAAOC,IAAML,CACrB,CAGA,SAASM,EAAqBC,GAC5B,OAAIA,EAAYC,OAAS,GAChBD,EAAYE,MAAM,EAAG,IAAM,MAE7BF,CACT,CAEA,MAAMG,GAAcX,EAAAA,EAAAA,IAAI,IAExB,SAASY,IACPd,EAAUe,OAAQ,EAClBC,OACGC,IAAIrB,GACJsB,MAAMC,IAELnB,EAAUe,OAAQ,EAClBF,EAAYE,MAAQI,EAAIC,KAAKA,IAAI,IAElCC,OAAOC,IACNtB,EAAUe,OAAQ,EAClBQ,QAAQC,IAAIF,EAAI,GAEtB,CAGA,MAAMG,GAAkBC,EAAAA,EAAAA,KAAS,IACxBb,EAAYE,MAAMY,QAAQC,GAAmB,GAAbA,EAAEC,YAGrCC,GAAqB5B,EAAAA,EAAAA,IAAI,CAAC,GAC1B6B,GAAe7B,EAAAA,EAAAA,IAAI,IAOzB,SAAS8B,IACPhB,OACGC,IAAIpB,GACJqB,MAAMC,IACLW,EAAmBf,MAAQI,EAAIC,KAAKA,KAEpCW,EAAahB,MAAQkB,OAAOC,QAAQJ,EAAmBf,OAAOoB,KAC3DC,IACQ,CACLC,MAAOD,EAAS,GAChB7B,OAAQ6B,EAAS,MAGtB,IAEFf,OAAOC,IACNC,QAAQC,IAAIF,EAAI,GAEtB,CAGA,MAAMgB,GAAmBpC,EAAAA,EAAAA,IAAI,IAC7B,SAASqC,EAAejC,GACtBiB,QAAQC,IAAIlB,GACZiB,QAAQC,IAAIlB,EAAMC,OAAOA,QACzBgB,QAAQC,IAAIlB,EAAMC,OAAOiC,aAAa,WAEtC,MAAMC,EAAOnC,EAAMC,OAAOmC,UAExBJ,EAAiBvB,MADN,SAAT0B,EACuBhB,EAAgBV,MAEhBU,EAAgBV,MAAMY,QAC5CgB,GAASA,EAAKP,WAAaK,GAGlC,C,OAGAG,EAAAA,EAAAA,IAAMnB,GAAkBoB,IACtBP,EAAiBvB,MAAQ8B,CAAQ,KAGnCC,EAAAA,EAAAA,KAAU,KACRhC,IACAkB,IACAM,EAAiBvB,MAAQU,EAAgBV,KAAK,I,sgDCpMhD,MAAMgC,EAAc,EAEpB,O","sources":["webpack://xxx/./src/views/UserProducts.vue","webpack://xxx/./src/views/UserProducts.vue?d35d"],"sourcesContent":["<template>\r\n  <ScrollTop />\r\n\r\n  <div class=\"p-5\">\r\n    <TabMenu :model=\"tabMenuItems\" @click=\"handleTabClick\" />\r\n\r\n    <div v-if=\"isLoading\" class=\"row row-cols-1 row-cols-md-3 g-4 p-5\">\r\n      <!-- 顯示 Skeleton 效果 -->\r\n      <div class=\"col-3\" v-for=\"i in 4\" :key=\"i\">\r\n        <div class=\"card border-dark h-100\">\r\n          <div class=\"p-skeleton-card\" style=\"width: 100%; height: 450px\">\r\n            <Skeleton width=\"100%\" height=\"150px\"></Skeleton>\r\n            <div class=\"flex justify-content-between align-items-baseline p-3\">\r\n              <Skeleton width=\"7rem\" height=\"2.5rem\" class=\"mt-2\"></Skeleton>\r\n              <Skeleton width=\"4rem\" height=\"2rem\"></Skeleton>\r\n            </div>\r\n            <div class=\"p-3\">\r\n              <Skeleton width=\"5rem\" class=\"mb-2\"></Skeleton>\r\n              <Skeleton width=\"10rem\" class=\"mb-2\"></Skeleton>\r\n              <Skeleton width=\"15rem\" class=\"mb-2\"></Skeleton>\r\n            </div>\r\n            <div\r\n              class=\"flex justify-content-between align-items-baseline pb-2 px-3\"\r\n            >\r\n              <Skeleton width=\"4rem\" height=\"2rem\" class=\"mt-2\"></Skeleton>\r\n              <Skeleton width=\"4rem\" height=\"2rem\"></Skeleton>\r\n            </div>\r\n            <hr style=\"margin: 0\" />\r\n            <div class=\"flex justify-content-between align-items-baseline p-3\">\r\n              <Skeleton width=\"7rem\" height=\"2rem\"></Skeleton>\r\n              <div class=\"flex justify-content-between\">\r\n                <Skeleton width=\"2rem\" height=\"2rem\" class=\"mx-1\"></Skeleton>\r\n                <Skeleton width=\"2rem\" height=\"2rem\"></Skeleton>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else class=\"row row-cols-1 row-cols-md-3 g-4 p-5\">\r\n      <div class=\"col-3\" v-for=\"item in filteredProducts\" :key=\"item.ID\">\r\n        <div class=\"card border-dark h-100 image-container background-image\">\r\n          <img\r\n            :src=\"item.ImageURL\"\r\n            class=\"card-img-top\"\r\n            :alt=\"item.Name\"\r\n            @error=\"handleImageError\"\r\n          />\r\n          <div class=\"text-overlay\">\r\n            <div class=\"card-body\">\r\n              <div\r\n                class=\"card-title d-flex justify-content-between align-items-baseline\"\r\n              >\r\n                <h3>\r\n                  <span class=\"badge text-dark bg-light\">{{ item.Name }}</span>\r\n                </h3>\r\n                <h6>\r\n                  <span class=\"badge text-white bg-pink\">{{\r\n                    item.Category\r\n                  }}</span>\r\n                </h6>\r\n              </div>\r\n              <p class=\"card-text\">\r\n                {{ truncatedDescription(item.Description) }}\r\n              </p>\r\n              <div class=\"d-flex justify-content-between align-items-baseline\">\r\n                <!-- <del class=\"h6\">{{ item.origin_price | currency }}元</del>\r\n                  <div class=\"h5\">{{ item.price | currency }}元</div> -->\r\n                <del class=\"h6\">1000元</del>\r\n                <div class=\"h5 text-red\">\r\n                  <strong>{{ item.Price | 100 }}元</strong>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div\r\n              class=\"card-footer d-flex justify-content-between\"\r\n              style=\"background-color: transparent\"\r\n            >\r\n              <!-- <router-link :to=\"{path: `lesson/${item.id}`}\" class=\"btn btn-outline-primary\">詳細資料</router-link>\r\n              <a href=\"#\" @click.prevent=\"addToCart({ id: item.id })\" class=\"btn btn-primary\">加入購物車</a> -->\r\n\r\n              <button type=\"button\" class=\"btn btn-outline-secondary\">\r\n                詳細資料\r\n              </button>\r\n              <!-- <button type=\"button\" class=\"btn btn-info\">加入購物車</button> -->\r\n              <div>\r\n                <button type=\"button\" class=\"btn btn-pink mx-1\">\r\n                  <i class=\"pi pi-heart\"></i>\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-info\">\r\n                  <i class=\"pi pi-shopping-cart\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted, computed, watch } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nconst webApi = `${process.env.VUE_APP_WebAPI}/product`;\r\nconst categoryApi = `${process.env.VUE_APP_WebAPI}/productcategory`;\r\nconst { t } = useI18n();\r\nconst $swal = inject(\"$swal\");\r\nconst isLoading = ref(false);\r\n\r\n// 圖片載入失敗時自動顯示預設圖片\r\nconst defaultImg = require(\"../img/img404.png\");\r\nfunction handleImageError(event) {\r\n  event.target.src = defaultImg;\r\n}\r\n\r\n// 檢查傳入的文字是否超過55個字符, 若超過則添加省略號 '...'\r\nfunction truncatedDescription(description) {\r\n  if (description.length > 55) {\r\n    return description.slice(0, 55) + \"...\";\r\n  }\r\n  return description;\r\n}\r\n\r\nconst allProducts = ref([]); // 全部商品資料\r\n// 取得全部商品資料\r\nfunction getProducts() {\r\n  isLoading.value = true;\r\n  $axios\r\n    .get(webApi)\r\n    .then((res) => {\r\n      // console.log(res);\r\n      isLoading.value = false;\r\n      allProducts.value = res.data.data;\r\n    })\r\n    .catch((err) => {\r\n      isLoading.value = false;\r\n      console.log(err);\r\n    });\r\n}\r\n\r\n// 篩選Enabled: true產品\r\nconst enabledProducts = computed(() => {\r\n  return allProducts.value.filter((x) => x.Enabled == true);\r\n});\r\n\r\nconst allProductCategory = ref({});\r\nconst tabMenuItems = ref([\r\n  //   {\r\n  //     label: \"全部商品\",\r\n  //     target: \"All\",\r\n  //   },\r\n]);\r\n\r\nfunction getProductCategory() {\r\n  $axios\r\n    .get(categoryApi)\r\n    .then((res) => {\r\n      allProductCategory.value = res.data.data;\r\n\r\n      tabMenuItems.value = Object.entries(allProductCategory.value).map(\r\n        (Category) => {\r\n          return {\r\n            label: Category[1], // 全部商品\r\n            target: Category[0], // All\r\n          };\r\n        }\r\n      );\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\n// 篩選後的產品資料\r\nconst filteredProducts = ref([]);\r\nfunction handleTabClick(event) {\r\n  console.log(event);\r\n  console.log(event.target.target);\r\n  console.log(event.target.getAttribute(\"target\"));\r\n  // console.log(event.target.attributes[2].nodeValue);\r\n  const text = event.target.innerText;\r\n  if (text === \"全部商品\") {\r\n    filteredProducts.value = enabledProducts.value;\r\n  } else {\r\n    filteredProducts.value = enabledProducts.value.filter(\r\n      (item) => item.Category === text\r\n    );\r\n  }\r\n}\r\n\r\n// 監聽 enabledProducts 變化\r\nwatch(enabledProducts, (newValue) => {\r\n  filteredProducts.value = newValue;\r\n});\r\n\r\nonMounted(() => {\r\n  getProducts();\r\n  getProductCategory();\r\n  filteredProducts.value = enabledProducts.value;\r\n});\r\n</script>\r\n\r\n<style>\r\n.image-container {\r\n  width: 100%;\r\n  position: relative;\r\n  display: inline-block;\r\n  overflow: hidden;\r\n}\r\n\r\n.image-container img {\r\n  /* width: 100%;height: 250px; object-fit: cover; */\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.image-container:hover img {\r\n  transform: scale(1.2);\r\n  z-index: 1;\r\n}\r\n\r\n.image-container .text-overlay {\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n/* 移除 TabMenu 選項點選時的 box-shadow */\r\n.p-tabmenu\r\n  .p-tabmenu-nav\r\n  .p-tabmenuitem\r\n  .p-menuitem-link:not(.p-disabled):focus {\r\n  box-shadow: none !important;\r\n}\r\n\r\n/* .background-image{\r\n  background-image: linear-gradient( 103.3deg,  rgba(252,225,208,1) 30%, rgba(255,173,214,1) 55.7%, rgba(162,186,245,1) 81.8% );\r\n  background-image: radial-gradient( circle farthest-corner at 5.3% 17.2%,  rgba(255,208,253,1) 0%, rgba(255,237,216,1) 90% );\r\n} */\r\n</style>\r\n","import script from \"./UserProducts.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserProducts.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserProducts.vue?vue&type=style&index=0&id=71e02f57&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["webApi","categoryApi","t","useI18n","isLoading","inject","ref","defaultImg","require","handleImageError","event","target","src","truncatedDescription","description","length","slice","allProducts","getProducts","value","$axios","get","then","res","data","catch","err","console","log","enabledProducts","computed","filter","x","Enabled","allProductCategory","tabMenuItems","getProductCategory","Object","entries","map","Category","label","filteredProducts","handleTabClick","getAttribute","text","innerText","item","watch","newValue","onMounted","__exports__"],"sourceRoot":""}